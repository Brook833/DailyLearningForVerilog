# 第一章 Verilog的基本知识

## 1.1 硬件描述语言HDL
硬件描述语言(HDL,hardware description language)是一种用形式化方法来描述数字电路和系统的语言。数字电路系统的设计者利用这种语言可以从上层到下层(从抽象到具体)逐层描述自己的设计思想，用一系列分层次的模块来表示及其复杂的数字系统。然后利用电子设计自动化(以下简称EDA)工具逐层进行仿真验证，再把其中需要变为具体物理电路的模块经由自动综合工具转化到门级电路网表。接下去再用专用集成电路(ASIC)或现场可编程门阵列(FPGA)自动布局布线工具把网表转换为具体电路布线结构的实现。

据统计，目前在美国硅谷约有90%以上的ASIC和FPGA已采用Verilog硬件缪奥数语言方法进行设计。

硬件描述语言的发展至今已有30年的历史，并成功地应用于设计的各个阶段:建模、仿真、验证和综合等。

## 1.2 Verilog HDL的历史

### 1.2.1 什么是Verilog HDL
Verilog HDL是硬件描述语言的一种，用于数字电子系统设计。该语言允许设计者进行各种级别的逻辑设计，进行数字逻辑系统的仿真验证、时序分析、逻辑综合。它是目前应用最广泛的一种硬件描述语言。

## 1.3 Verilog HDL和VHDL的比较
Verilog HDL和VHDL都是用于逻辑设计的硬件描述语言，并且都已成为IEEE标准。

VHDL的英文全名为VHSIC Hardware Description Language,而VHSIC则是Very High Speed Integerated Circuit的缩写，意为甚高速集成电路，故VHDL其准确的中文译名为甚高速集成电路的硬件描述语言。

Verilog HDL和VHDL作为描述硬件电路设计的语言，其共同的特点在于:
> + 能形式化的抽象电路的行为和结构；
> + 支持逻辑设计中层次与范围的描述；
> + 可借用高级语言的精巧结构来简化电路行为的描述；
> + 具有电路仿真与验证机制以保证设计的正确性；
> + 支持电路描述由高层到低层的综合转换；
> + 硬件描述与实现工艺无关(有关工艺参数可通过语言提供的属性包括进去)；
> + 便于文档管理;
> + 易于理解和设计重用;

与VHDL相比Verilog HDL最大的有点是易于掌握。

## 1.4 Verilog适用的设计
Verilog适合系统级(system)、算法级(alogrithem)、寄存器传输级(RTL)、逻辑级(log-ic)、门级(gate)、电路开关级(switch)设计，而System Verilog是Verilog语言的扩展和延伸，更适用于可重用的验证用IP设计，以及特大型(千万门级以上)基于IP的系统级设计和验证。

## 1.5 采用Verilog HDL设计复杂数字电路的优点

### 1.5.1 传统设计方法————电路原理图输入法
需要手工布线，设计周期长，这种低水平的设计方法大大延长了设计周期。

### 1.5.2 Verilog HDL设计法与传统的电路原理图输入法的比较
采用Verilog输入法时，由于Verilog HDL的标准化，可以很容易地把完成地设计移植到不同厂家地不同芯片中去，并在不同规模地应用时可以较容易地做修改。

最大地优点是其与工艺无关性。

### 1.5.3 Verilog地标准化与软核地重用
**把功能经过验证的、可综合的、实现后的电路结构总门数在5000门以上的Verilog HDL模型称为"软核"(Soft Core)。**

而把由软核构成的器件成为虚拟器件，在新电路的研制过程中，软核和虚拟器可以很容易地借助EDA工具与其他外部逻辑结合为一体。

### 1.5.4 软核、固核和硬核地概念及其重用
**把在某一种现场可编程门阵列(FPGA)器件上实现的、经过验证是正确的、总门数在5000门以上的电路结构编码文件称为"固核"**

**把在某一种专用集成电路工艺的(ASIC)器件上实现的、经验证是正确的、总门数在5000门以上的电路结构版图掩膜称为"硬核"**

显而易见，在具体实现手段和工艺技术尚未确定的逻辑设计阶段，软核具有最大的灵活性，很容易借助EDA综合工具与其他外部逻辑结合为一体。

相比之下，固核和硬核与其他外部逻辑电路结合为一体的灵活性要差得多。

## 1.6 采用硬件描述语言(Verilog HDL)的设计流程简介

### 1.6.1 自顶向下(Top_Down)设计的基本概念
自顶向下的设计(即Top_Down设计)是从系统级开始，把系统划分为基本单元，然后把每个基本单元分为下一层次的接本单元，直到可以直接用EDA元件库中的基本元件来实现为止。

### 1.6.2 层次管理的基本概念
复杂数字逻辑电路和系统的层次化、结构化设计隐含着对系统硬件设计方案的逐次分解。在设计过程中的任意层次，至少得有一种形式来描述硬件。

硬件的描述特别是行为描述通常称为行为建模。在集成电路设计的每一层次，硬件可以分为一些模块，该层次的硬件结构有这些模块的互相联网描述，就层次的硬件的行为由这些模块的行为描述。这些模块称为该层次的基本单元。

EDA工具提供了有效的手段来管理错综复杂的层次，即可以很方便的查看某一层次某模块源代码或电路图已改正仿真时发现的错误。

### 1.6.3 具体模块的设计编译和仿真的过程
在不同的层次做具体模块的设计所用的方法也有所不同，在高层次上往往编写一些行为级的模块通过仿真加以验证，器主要目的是系统性能的总体考虑和各模块的指标分配，并非具体电路的实现，因而综合及其以后的步骤往往不需进行。而当设计的层次比较接近底层时，行为描述往往需要用电路逻辑来实现。这时的模块不仅需要通过仿真加以验证，还需进行综合、优化、布线和后仿真。

EDA工具往往不仅支持HDL描述也支持电路图输入，有效的利用这两种方法是提高设计效率的办法之一。

**模块设计流程主要由两把主要功能部分组成:**
> + 设计开发: 即从编写设计文件->综合到布局布线->电路生成这样一些了步骤。
> + 设计验证: 也就是进行各种仿真的一系列步骤，如果在仿真过程中发现问题就返回设计输入进行修改。

### 1.6.4 具体工艺器件的优化、映像和布局布线
由于各种ASIC和FPGA器件的工艺各不相同，因而当用不同厂家的不同器件来实现已验证的逻辑网表(EDIF文件)时，就需要不同的基本单元库与布线延迟模型与之对应，才能进行优化、映像和布局布线、以及布局布线后准确的仿真验证。

基本单元库与布线延迟模型由熟悉本厂工艺的工程师提供，再由EDA厂商的工程师编入相应的处理程序，而逻辑电路设计师只需用一文件说明所用的工艺器件和约束条件，EDA工具就会自动的根据这一文件选择相应的库和模型进行准确的处理。